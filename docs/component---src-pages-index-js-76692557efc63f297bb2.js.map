{"version":3,"sources":["webpack:///./src/components/wikidata.js","webpack:///./src/components/peak.js","webpack:///./src/components/peakslist.js","webpack:///./src/components/animatedleafletmap.js","webpack:///./src/components/peaksandmap.js","webpack:///./src/pages/index.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/components/layout.js"],"names":["axios","require","Wikidata","props","_this","_React$Component","call","this","get","obj","key","split","reduce","o","x","state","filename","description","attribution","getImageInfo","_callee","image_id","wikidata_url","wikidata_response","wikidata_image","wikimedia_response","author","license","regenerator_default","a","wrap","_context","prev","next","sent","data","substring","setState","abrupt","stop","componentDidUpdate","prevProps","prevState","id","render","replace","wikidata_image_md5","md5","url","react_default","createElement","index_esm","w","sx","text-align","src","dangerouslySetInnerHTML","__html","React","Component","defaultProps","Peak","next_peak","p","color","name","font","elevation","wikidata","width","mb","onClick","prevPeakCallback","nextPeakCallback","position","image","PeaksList","activePeak","setActivePeak","prevPeak","nextPeak","peak_idx","updateMapPositionCallback","peaks","geometry","envelope","minY","minX","peak","next_peak_name","next_peak_callback","prev_peak_name","prev_peak_callback","featureFields","bind","length","components_peak","ele","AnimatedLeafletMap","mapRef","markerLayer","leafletElement","flyTo","zoom","positionMap","newPosition","_this2","Map","ref","center","TileLayer","minZoom","maxZoom","accessToken","tilesetId","Marker","Popup","markerText","PeaksAndMap","updateMapPosition","flexWrap","peakslist","window","components_animatedleafletmap","__webpack_require__","d","__webpack_exports__","query","IndexPage","_ref","highestPeaks","allGeoFeature","edges","node","forEach","edge","parseInt","push","layout","peaksandmap","m","module","exports","default","ProdPageRenderer","location","pageResources","InternalPageRenderer","Object","assign","json","StaticQueryContext","loader","enqueue","createContext","StaticQueryDataRenderer","staticQueryData","finalData","Fragment","StaticQuery","children","Consumer","Layout","gatsby_browser_entry_StaticQuery","fontSize","fontsize","pt","bg","href","_755544856"],"mappings":"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","file":"component---src-pages-index-js-76692557efc63f297bb2.js","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { Box, Card, Heading, Text, Button, Image } from \"rebass\"\nimport md5 from \"md5\"\nconst axios = require(\"axios\")\n\nclass Wikidata extends React.Component {\n  static propTypes = {\n    id: PropTypes.string,\n  }\n\n  static defaultProps = {\n    id: null,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = { filename: null, description: null, attribution: null }\n  }\n\n  async getImageInfo(image_id) {\n    const wikidata_url =\n      \"https://www.wikidata.org/wiki/Special:EntityData/\" + image_id + \".json\"\n    const wikidata_response = await axios.get(wikidata_url)\n    const wikidata_image = this.get(\n      wikidata_response.data,\n      \"entities.\" + image_id + \".claims.P18.0.mainsnak.datavalue.value\"\n    )\n    if (wikidata_image) {\n      const wikimedia_response = await axios.get(\n        \"https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=imageinfo&iiprop=extmetadata&titles=File%3a\" +\n          wikidata_image +\n          \"&format=json\"\n      )\n      if (wikimedia_response) {\n        var filename = this.get(wikimedia_response.data, \"query.pages.-1.title\")\n        if (filename) {\n          filename = filename.substring(5)\n        }\n        var description = this.get(\n          wikimedia_response.data,\n          \"query.pages.-1.imageinfo.0.extmetadata.ImageDescription.value\"\n        )\n        var author = this.get(\n          wikimedia_response.data,\n          \"query.pages.-1.imageinfo.0.extmetadata.Artist.value\"\n        )\n        var license = this.get(\n          wikimedia_response.data,\n          \"query.pages.-1.imageinfo.0.extmetadata.LicenseShortName.value\"\n        )\n        this.setState({\n          filename: filename,\n          description: description,\n          attribution: \"&copy; \" + author + \" \" + license,\n        })\n      }\n    }\n    return null\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.id != this.props.id) {\n      if (this.props.id) {\n        this.getImageInfo(this.props.id)\n      }\n    }\n  }\n\n  get = function(obj, key) {\n    return key.split(\".\").reduce(function(o, x) {\n      return typeof o == \"undefined\" || o === null ? o : o[x]\n    }, obj)\n  }\n\n  render() {\n    if (!this.props.id) {\n      return null\n    }\n    if (!this.state.filename) {\n      return null\n    }\n\n    var wikidata_image = this.state.filename.replace(/ /g, \"_\")\n\n    var wikidata_image_md5 = md5(wikidata_image)\n\n    var url =\n      \"https://upload.wikimedia.org/wikipedia/commons/thumb/\" +\n      wikidata_image_md5.substring(0, 1) +\n      \"/\" +\n      wikidata_image_md5.substring(0, 2) +\n      \"/\" +\n      wikidata_image +\n      \"/220px-\" +\n      wikidata_image\n\n    return (\n      <Box w=\"100%\" sx={{ \"text-align\": \"center\" }}>\n        <Image src={url} />\n        <Text dangerouslySetInnerHTML={{ __html: this.state.description }} />\n        <Text dangerouslySetInnerHTML={{ __html: this.state.attribution }} />\n      </Box>\n    )\n  }\n}\n\nexport default Wikidata\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { Box, Heading, Text, Button } from \"rebass\"\nimport Wikidata from \"../components/wikidata\"\nconst axios = require(\"axios\")\n\nclass Peak extends React.Component {\n  static propTypes = {\n    /** Latitude and Longitude of the map centre in an array, eg [51, -1] **/\n    position: PropTypes.array,\n    name: PropTypes.string,\n    description: PropTypes.string,\n    image: PropTypes.string,\n    next: PropTypes.string,\n    prev: PropTypes.string,\n    elevation: PropTypes.string,\n    wikidata: PropTypes.string,\n    nextPeakCallback: PropTypes.func,\n    prevPeakCallback: PropTypes.func,\n  }\n\n  static defaultProps = {\n    position: [0, 0],\n    name: \"\",\n    description: \"\",\n    image: \"\",\n    elevation: 0,\n    next: \"\",\n    prev: \"\",\n    wikidata: null,\n    nextPeakCallback: null,\n    prevPeakCallback: null,\n  }\n\n  //)}\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    var next_peak = this.props.next\n    if (next_peak !== \"\") {\n      next_peak = \" south of \" + next_peak\n    }\n\n    return (\n      <Box p={2}>\n        <Heading color=\"secondary\" p={2}>\n          {this.props.name}\n        </Heading>\n        <Text font=\"body\" color=\"text\" p={2}>\n          At {this.props.elevation}m {this.props.name} is the highest point in\n          the UK{next_peak}\n        </Text>\n        <Wikidata id={this.props.wikidata} />\n        <Box p={2}>\n          {this.props.prev && (\n            <Button width=\"100%\" mb={2} onClick={this.props.prevPeakCallback}>\n              Previous: {this.props.prev}\n            </Button>\n          )}\n          {this.props.next && (\n            <Button width=\"100%\" onClick={this.props.nextPeakCallback}>\n              Next: {this.props.next}\n            </Button>\n          )}\n        </Box>\n      </Box>\n    )\n  }\n}\n\nexport default Peak\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Peak from \"../components/peak\"\n\nclass PeaksList extends React.Component {\n  static propTypes = {\n    peaks: PropTypes.array,\n    updateMapPositionCallback: PropTypes.func,\n  }\n\n  static defaultProps = {\n    peaks: [],\n    updateMapPositionCallback: null,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = { activePeak: 0 }\n    this.setActivePeak(0)\n  }\n\n  prevPeak() {\n    this.setActivePeak(this.state.activePeak - 1)\n  }\n\n  nextPeak() {\n    this.setActivePeak(this.state.activePeak + 1)\n  }\n\n  setActivePeak(peak_idx) {\n    this.setState({ activePeak: peak_idx })\n    if (this.props.updateMapPositionCallback) {\n      this.props.updateMapPositionCallback([\n        this.props.peaks[peak_idx].geometry.envelope.minY,\n        this.props.peaks[peak_idx].geometry.envelope.minX,\n      ])\n    }\n  }\n\n  render() {\n    var peak = this.props.peaks[this.state.activePeak]\n    var next_peak_name = \"\"\n    var next_peak_callback = null\n    var prev_peak_name = \"\"\n    var prev_peak_callback = null\n    if (this.state.activePeak > 0) {\n      prev_peak_name = this.props.peaks[this.state.activePeak - 1].featureFields\n        .name\n      prev_peak_callback = this.prevPeak.bind(this)\n    }\n    if (this.state.activePeak + 1 < this.props.peaks.length) {\n      next_peak_name = this.props.peaks[this.state.activePeak + 1].featureFields\n        .name\n      next_peak_callback = this.nextPeak.bind(this)\n    }\n    return (\n      <Peak\n        id={peak.featureFields.name}\n        name={peak.featureFields.name}\n        elevation={peak.featureFields.ele}\n        wikidata={peak.featureFields.wikidata}\n        position={[peak.geometry.envelope.minY, peak.geometry.envelope.minX]}\n        next={next_peak_name}\n        prev={prev_peak_name}\n        nextPeakCallback={next_peak_callback}\n        prevPeakCallback={prev_peak_callback}\n      />\n    )\n  }\n}\n\nexport default PeaksList\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\"\nimport \"./animatedleafletmap.css\"\n\nclass AnimatedLeafletMap extends React.Component {\n  static propTypes = {\n    /** Latitude and Longitude of the map centre in an array, eg [51, -1] **/\n    position: PropTypes.array,\n\n    /** Initial zoom level for the map (default 13) **/\n    zoom: PropTypes.number,\n\n    /** If set, will display a marker, which when clicked will display this text **/\n    markerText: PropTypes.string,\n  }\n\n  static defaultProps = {\n    position: [51, -1],\n    zoom: 11,\n    markerText: \"\",\n  }\n\n  constructor(props) {\n    super(props)\n    this.mapRef = null\n    this.markerLayer = null\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const map = this.mapRef.leafletElement\n    if (map != null) {\n      this.mapRef.leafletElement.flyTo(this.props.position, this.props.zoom)\n    }\n  }\n\n  positionMap(newPosition) {\n    this.setState({ position: newPosition })\n  }\n\n  render() {\n    return (\n      <Map\n        ref={ref => (this.mapRef = ref)}\n        center={this.props.position}\n        zoom={this.props.zoom}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.mapbox.com/about/maps\">MapBox</a> &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> &copy; <a href=\"https://www.digitalglobe.com\">DigitalGlobe</a> <a href=\"https://www.mapbox.com/map-feedback/\">Improve this map</a>'\n          url=\"https://api.mapbox.com/styles/v1/mapbox/{tilesetId}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\n          minZoom={this.props.zoom}\n          maxZoom={this.props.zoom}\n          accessToken=\"pk.eyJ1IjoiYW5kcmV3bCIsImEiOiJJdDlBVy0wIn0.6iigHBr09SrVB3N8graGdA\"\n          tilesetId=\"satellite-v9\"\n        />\n        <Marker position={this.props.position}>\n          <Popup>{this.props.markerText}</Popup>\n        </Marker>\n      </Map>\n    )\n  }\n}\n\nexport default AnimatedLeafletMap\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport PeaksList from \"../components/peakslist\"\nimport { Flex, Box } from \"rebass\"\nimport AnimatedLeafletMap from \"../components/animatedleafletmap\"\n\nclass PeaksAndMap extends React.Component {\n  static propTypes = {\n    peaks: PropTypes.array,\n  }\n\n  static defaultProps = {\n    peaks: [],\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = { position: [30, 20] }\n  }\n\n  updateMapPosition(position) {\n    this.setState({ position: position })\n  }\n\n  render() {\n    return (\n      <Flex width={1 / 1} flexWrap=\"wrap\">\n        <Box width={[1 / 1, 1 / 1, 1 / 3]}>\n          <PeaksList\n            updateMapPositionCallback={this.updateMapPosition.bind(this)}\n            peaks={this.props.peaks}\n          />\n        </Box>\n        <Box width={[1 / 1, 1 / 1, 2 / 3]}>\n          {typeof window !== \"undefined\" && (\n            <AnimatedLeafletMap position={this.state.position} zoom={7} />\n          )}\n        </Box>\n      </Flex>\n    )\n  }\n}\n\nexport default PeaksAndMap\n","import React from \"react\"\nimport Layout from \"../components/layout\"\nimport { Box } from \"rebass\"\nimport PeaksAndMap from \"../components/peaksandmap\"\n\nconst IndexPage = ({ data }) => {\n  const highestPeaks = [data.allGeoFeature.edges[0].node]\n  data.allGeoFeature.edges.forEach(function(edge) {\n    if (\n      parseInt(edge.node.featureFields.ele) >\n      parseInt(highestPeaks[highestPeaks.length - 1].featureFields.ele)\n    ) {\n      highestPeaks.push(edge.node)\n    }\n  })\n\n  return (\n    <Layout>\n      <PeaksAndMap peaks={highestPeaks} />\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query {\n    allGeoFeature(\n      sort: { fields: geometry___envelope___minY, order: ASC }\n      filter: {\n        featureFields: { name: { ne: null }, ele: { regex: \"/^[0-9]+$/\" } }\n      }\n    ) {\n      edges {\n        node {\n          id\n          geometry {\n            envelope {\n              minY\n              minX\n            }\n          }\n          featureFields {\n            name\n            ele\n            wikidata\n          }\n        }\n      }\n    }\n  }\n`\n\nexport default IndexPage\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\n\nconst ProdPageRenderer = ({ location, pageResources }) => {\n  if (!pageResources) {\n    return null\n  }\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport loader from \"./loader\"\n\nconst prefetchPathname = loader.enqueue\n\nconst StaticQueryContext = React.createContext({})\n\nfunction StaticQueryDataRenderer({ staticQueryData, data, query, render }) {\n  const finalData = data\n    ? data.data\n    : staticQueryData[query] && staticQueryData[query].data\n\n  return (\n    <React.Fragment>\n      {finalData && render(finalData)}\n      {!finalData && <div>Loading (StaticQuery)</div>}\n    </React.Fragment>\n  )\n}\n\nconst StaticQuery = props => {\n  const { data, query, render, children } = props\n\n  return (\n    <StaticQueryContext.Consumer>\n      {staticQueryData => (\n        <StaticQueryDataRenderer\n          data={data}\n          query={query}\n          render={render || children}\n          staticQueryData={staticQueryData}\n        />\n      )}\n    </StaticQueryContext.Consumer>\n  )\n}\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n  prefetchPathname,\n}\n","/**\n * Layout component that queries for data\n * with Gatsby's StaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/static-query/\n */\n\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { StaticQuery, graphql } from \"gatsby\"\nimport { Flex, Box, Heading, Text } from \"rebass\"\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query SiteTitleQuery {\n        site {\n          siteMetadata {\n            title\n          }\n        }\n      }\n    `}\n    render={data => (\n      <div>\n        <Flex m={3} flexWrap=\"wrap\">\n          <Box width={1 / 1}>\n            <Heading fontSize={[4, 5, 6]} color=\"primary\">\n              Highest place south of...\n            </Heading>\n          </Box>\n          <Box width={1 / 1}>\n            <Text color=\"text\" fontsize={[2, 3, 4]} pt={2}>\n              This is an interactive map of those places that can claim to be\n              'the highest place in the UK south of (some other place)'\n            </Text>\n            <Text color=\"text\" fontsize={[2, 3, 4]} pt={2}>\n              Why? Walking up Pen-y-fan recently I saw it was listed somewhere\n              as 'the highest place south of Cadair Idris' - being a mapping fan\n              I wondered whether it was possible to find out where all the\n              places that were the 'highest place south of' somewhere else.\n            </Text>\n          </Box>\n        </Flex>\n        <Flex>{children}</Flex>\n        <Flex>\n          <Box bg=\"primary\" p={2} color=\"text\" width={1 / 1}>\n            Build by <a href=\"https://www.andrewl.net\">Andrew Larcombe</a> using <a href=\"https://www.gatsbyjs.com\">Gatsby</a> and using data from\n            OpenStreetMap, images from wikimedia and maps from MapBox\n          </Box>\n        </Flex>\n      </div>\n    )}\n  />\n)\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n"],"sourceRoot":""}