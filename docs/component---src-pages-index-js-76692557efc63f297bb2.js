(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{204:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(218),o=a(209),s=(a(25),a(51),a(8),a(12),a(249)),p=a.n(s),l=(a(220),a(23),a(250)),c=a.n(l);function u(e,t,a,r,n,i,o){try{var s=e[i](o),p=s.value}catch(l){return void a(l)}s.done?t(p):Promise.resolve(p).then(r,n)}var h=a(223),m=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).get=function(e,t){return t.split(".").reduce(function(e,t){return null==e?e:e[t]},e)},a.state={filename:null,description:null,attribution:null},a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var i=r.prototype;return i.getImageInfo=function(){var e,t=(e=p.a.mark(function e(t){var a,r,n,i,o,s,l,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://www.wikidata.org/wiki/Special:EntityData/"+t+".json",e.next=3,h.get(a);case 3:if(r=e.sent,!(n=this.get(r.data,"entities."+t+".claims.P18.0.mainsnak.datavalue.value"))){e.next=10;break}return e.next=8,h.get("https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=imageinfo&iiprop=extmetadata&titles=File%3a"+n+"&format=json");case 8:(i=e.sent)&&((o=this.get(i.data,"query.pages.-1.title"))&&(o=o.substring(5)),s=this.get(i.data,"query.pages.-1.imageinfo.0.extmetadata.ImageDescription.value"),l=this.get(i.data,"query.pages.-1.imageinfo.0.extmetadata.Artist.value"),c=this.get(i.data,"query.pages.-1.imageinfo.0.extmetadata.LicenseShortName.value"),this.setState({filename:o,description:s,attribution:"&copy; "+l+" "+c}));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,a=arguments;return new Promise(function(r,n){var i=e.apply(t,a);function o(e){u(i,r,n,o,s,"next",e)}function s(e){u(i,r,n,o,s,"throw",e)}o(void 0)})});return function(e){return t.apply(this,arguments)}}(),i.componentDidUpdate=function(e,t){e.id!=this.props.id&&this.props.id&&this.getImageInfo(this.props.id)},i.render=function(){if(!this.props.id)return null;if(!this.state.filename)return null;var e=this.state.filename.replace(/ /g,"_"),t=c()(e),a="https://upload.wikimedia.org/wikipedia/commons/thumb/"+t.substring(0,1)+"/"+t.substring(0,2)+"/"+e+"/220px-"+e;return n.a.createElement(o.a,{w:"100%",sx:{"text-align":"center"}},n.a.createElement(o.e,{src:a}),n.a.createElement(o.f,{dangerouslySetInnerHTML:{__html:this.state.description}}),n.a.createElement(o.f,{dangerouslySetInnerHTML:{__html:this.state.attribution}}))},r}(n.a.Component);m.defaultProps={id:null};var d=m;a(223);var f=function(e){var t,a;function r(t){return e.call(this,t)||this}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r.prototype.render=function(){var e=this.props.next;return""!==e&&(e=" south of "+e),n.a.createElement(o.a,{p:2},n.a.createElement(o.d,{color:"secondary",p:2},this.props.name),n.a.createElement(o.f,{font:"body",color:"text",p:2},"At ",this.props.elevation,"m ",this.props.name," is the highest point in the UK",e),n.a.createElement(d,{id:this.props.wikidata}),n.a.createElement(o.a,{p:2},this.props.prev&&n.a.createElement(o.b,{width:"100%",mb:2,onClick:this.props.prevPeakCallback},"Previous: ",this.props.prev),this.props.next&&n.a.createElement(o.b,{width:"100%",onClick:this.props.nextPeakCallback},"Next: ",this.props.next)))},r}(n.a.Component);f.defaultProps={position:[0,0],name:"",description:"",image:"",elevation:0,next:"",prev:"",wikidata:null,nextPeakCallback:null,prevPeakCallback:null};var v=f;var k=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).state={activePeak:0},a.setActivePeak(0),a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var i=r.prototype;return i.prevPeak=function(){this.setActivePeak(this.state.activePeak-1)},i.nextPeak=function(){this.setActivePeak(this.state.activePeak+1)},i.setActivePeak=function(e){this.setState({activePeak:e}),this.props.updateMapPositionCallback&&this.props.updateMapPositionCallback([this.props.peaks[e].geometry.envelope.minY,this.props.peaks[e].geometry.envelope.minX])},i.render=function(){var e=this.props.peaks[this.state.activePeak],t="",a=null,r="",i=null;return this.state.activePeak>0&&(r=this.props.peaks[this.state.activePeak-1].featureFields.name,i=this.prevPeak.bind(this)),this.state.activePeak+1<this.props.peaks.length&&(t=this.props.peaks[this.state.activePeak+1].featureFields.name,a=this.nextPeak.bind(this)),n.a.createElement(v,{id:e.featureFields.name,name:e.featureFields.name,elevation:e.featureFields.ele,wikidata:e.featureFields.wikidata,position:[e.geometry.envelope.minY,e.geometry.envelope.minX],next:t,prev:r,nextPeakCallback:a,prevPeakCallback:i})},r}(n.a.Component);k.defaultProps={peaks:[],updateMapPositionCallback:null};var g=k,w=a(286),y=a(287),b=a(285),E=a(288);a(273);var x=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).mapRef=null,a.markerLayer=null,a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var i=r.prototype;return i.componentDidUpdate=function(e,t){null!=this.mapRef.leafletElement&&this.mapRef.leafletElement.flyTo(this.props.position,this.props.zoom)},i.positionMap=function(e){this.setState({position:e})},i.render=function(){var e=this;return n.a.createElement(w.a,{ref:function(t){return e.mapRef=t},center:this.props.position,zoom:this.props.zoom},n.a.createElement(y.a,{attribution:'© <a href="https://www.mapbox.com/about/maps">MapBox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> © <a href="https://www.digitalglobe.com">DigitalGlobe</a> <a href="https://www.mapbox.com/map-feedback/">Improve this map</a>',url:"https://api.mapbox.com/styles/v1/mapbox/{tilesetId}/tiles/{z}/{x}/{y}?access_token={accessToken}",minZoom:this.props.zoom,maxZoom:this.props.zoom,accessToken:"pk.eyJ1IjoiYW5kcmV3bCIsImEiOiJJdDlBVy0wIn0.6iigHBr09SrVB3N8graGdA",tilesetId:"satellite-v9"}),n.a.createElement(b.a,{position:this.props.position},n.a.createElement(E.a,null,this.props.markerText)))},r}(n.a.Component);x.defaultProps={position:[51,-1],zoom:11,markerText:""};var P=x;var _=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).state={position:[30,20]},a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var i=r.prototype;return i.updateMapPosition=function(e){this.setState({position:e})},i.render=function(){return n.a.createElement(o.c,{width:1,flexWrap:"wrap"},n.a.createElement(o.a,{width:[1,1,1/3]},n.a.createElement(g,{updateMapPositionCallback:this.updateMapPosition.bind(this),peaks:this.props.peaks})),n.a.createElement(o.a,{width:[1,1,2/3]},"undefined"!=typeof window&&n.a.createElement(P,{position:this.state.position,zoom:7})))},r}(n.a.Component);_.defaultProps={peaks:[]};var C=_;a.d(t,"query",function(){return I});var I="1311196967";t.default=function(e){var t=e.data,a=[t.allGeoFeature.edges[0].node];return t.allGeoFeature.edges.forEach(function(e){parseInt(e.node.featureFields.ele)>parseInt(a[a.length-1].featureFields.ele)&&a.push(e.node)}),n.a.createElement(i.a,null,n.a.createElement(C,{peaks:a}))}},211:function(e,t,a){var r;e.exports=(r=a(216))&&r.default||r},215:function(e){e.exports={data:{site:{siteMetadata:{title:"Highest place south of"}}}}},216:function(e,t,a){"use strict";a.r(t);a(18);var r=a(0),n=a.n(r),i=a(116);t.default=function(e){var t=e.location,a=e.pageResources;return a?n.a.createElement(i.a,Object.assign({location:t,pageResources:a},a.json)):null}},218:function(e,t,a){"use strict";var r=a(215),n=a(0),i=a.n(n),o=(a(79),a(211),a(11).default.enqueue,i.a.createContext({}));function s(e){var t=e.staticQueryData,a=e.data,r=e.query,n=e.render,o=a?a.data:t[r]&&t[r].data;return i.a.createElement(i.a.Fragment,null,o&&n(o),!o&&i.a.createElement("div",null,"Loading (StaticQuery)"))}var p=function(e){var t=e.data,a=e.query,r=e.render,n=e.children;return i.a.createElement(o.Consumer,null,function(e){return i.a.createElement(s,{data:t,query:a,render:r||n,staticQueryData:e})})};var l=a(209);t.a=function(e){var t=e.children;return i.a.createElement(p,{query:"755544856",render:function(e){return i.a.createElement("div",null,i.a.createElement(l.c,{m:3,flexWrap:"wrap"},i.a.createElement(l.a,{width:1},i.a.createElement(l.d,{fontSize:[4,5,6],color:"primary"},"Highest place south of...")),i.a.createElement(l.a,{width:1},i.a.createElement(l.f,{color:"text",fontsize:[2,3,4],pt:2},"This is an interactive map of those places that can claim to be 'the highest place in the UK south of (some other place)'"),i.a.createElement(l.f,{color:"text",fontsize:[2,3,4],pt:2},"Why? Walking up Pen-y-fan recently I saw it was listed somewhere as 'the highest place south of Cadair Idris' - being a mapping fan I wondered whether it was possible to find out where all the places that were the 'highest place south of' somewhere else."))),i.a.createElement(l.c,null,t),i.a.createElement(l.c,null,i.a.createElement(l.a,{bg:"primary",p:2,color:"text",width:1},"Build by ",i.a.createElement("a",{href:"https://www.andrewl.net"},"Andrew Larcombe")," using ",i.a.createElement("a",{href:"https://www.gatsbyjs.com"},"Gatsby")," and using data from OpenStreetMap, images from wikimedia and maps from MapBox")))},data:r})}}}]);
//# sourceMappingURL=component---src-pages-index-js-76692557efc63f297bb2.js.map