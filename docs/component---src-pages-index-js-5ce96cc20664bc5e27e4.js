(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{204:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(218),i=a(209),s=(a(25),a(12),a(23),a(248)),p=a.n(s);a(222);var l=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).get=function(e,t){return t.split(".").reduce(function(e,t){return null==e?e:e[t]},e)},a.state={data:[]},a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var o=n.prototype;return o.componentDidUpdate=function(e,t){var a=this;e.id!=this.props.id&&this.props.id&&fetch("https://www.wikidata.org/wiki/Special:EntityData/"+this.props.id+".json").then(function(e){return e.json()}).then(function(e){return a.setState({data:e})})},o.render=function(){if(!this.props.id)return null;var e,t=this.props.id;if(console.log(this.state.data),!(t=this.get(this.state.data,"entities."+this.props.id+".claims.P18.0.mainsnak.datavalue.value")))return null;t=t.replace(/ /g,"_");var a=p()(t);return console.log(a),e="https://upload.wikimedia.org/wikipedia/commons/thumb/"+a.substring(0,1)+"/"+a.substring(0,2)+"/"+t+"/220px-"+t,r.a.createElement(i.a,null,r.a.createElement(i.e,{alignContent:"center",src:e}))},n}(r.a.Component);l.defaultProps={id:null};var c=l;a(222);var u=function(e){var t,a;function n(t){return e.call(this,t)||this}return a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.prototype.render=function(){var e=this.props.next;return""!==e&&(e=" south of "+e),r.a.createElement(i.a,{p:2},r.a.createElement(i.d,{color:"secondary",p:2},this.props.name),r.a.createElement(i.f,{font:"body",color:"text",p:2},"At ",this.props.elevation,"m ",this.props.name," is the highest point in the UK",e),r.a.createElement(i.a,{p:2,mr:2},r.a.createElement(i.b,{disabled:!this.props.prevPeakCallback,onClick:this.props.prevPeakCallback},"Previous"),r.a.createElement(i.b,{ml:2,disabled:!this.props.nextPeakCallback,onClick:this.props.nextPeakCallback},"Next")),r.a.createElement(c,{id:this.props.wikidata}))},n}(r.a.Component);u.defaultProps={position:[51,-1],name:"name",description:"blah",image:"",elevation:0,next:"aa",wikidata:null,nextPeakCallback:null,prevPeakCallback:null};var h=u;var m=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).state={activePeak:0},a.setActivePeak(0),a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var o=n.prototype;return o.prevPeak=function(){this.setActivePeak(this.state.activePeak-1)},o.nextPeak=function(){this.setActivePeak(this.state.activePeak+1)},o.setActivePeak=function(e){console.log("Setting active peak to "+e),this.setState({activePeak:e}),this.props.updateMapPositionCallback&&this.props.updateMapPositionCallback([this.props.peaks[e].geometry.envelope.minY,this.props.peaks[e].geometry.envelope.minX])},o.render=function(){var e=this.props.peaks[this.state.activePeak],t="",a=null,n=0==this.state.activePeak?null:this.prevPeak.bind(this);return this.state.activePeak+1<this.props.peaks.length&&(t=this.props.peaks[this.state.activePeak+1].featureFields.name,a=this.nextPeak.bind(this)),r.a.createElement(h,{id:e.featureFields.name,name:e.featureFields.name,elevation:e.featureFields.ele,wikidata:e.featureFields.wikidata,position:[e.geometry.envelope.minY,e.geometry.envelope.minX],next:t,nextPeakCallback:a,prevPeakCallback:n})},n}(r.a.Component);m.defaultProps={peaks:[],updateMapPositionCallback:null};var d=m,f=a(284),v=a(285),k=a(283),w=a(286);a(271);var g=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).mapRef=null,a.markerLayer=null,a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var o=n.prototype;return o.componentDidUpdate=function(e,t){null!=this.mapRef.leafletElement&&this.mapRef.leafletElement.flyTo(this.props.position,this.props.zoom)},o.positionMap=function(e){this.setState({position:e})},o.render=function(){var e=this;return r.a.createElement(f.a,{ref:function(t){return e.mapRef=t},center:this.props.position,zoom:this.props.zoom},r.a.createElement(v.a,{attribution:'© <a href="https://www.mapbox.com/about/maps">MapBox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> © <a href="https://www.digitalglobe.com">DigitalGlobe</a> <a href="https://www.mapbox.com/map-feedback/">Improve this map</a>',url:"https://api.mapbox.com/styles/v1/mapbox/{tilesetId}/tiles/{z}/{x}/{y}?access_token={accessToken}",minZoom:this.props.zoom,maxZoom:this.props.zoom,accessToken:"pk.eyJ1IjoiYW5kcmV3bCIsImEiOiJJdDlBVy0wIn0.6iigHBr09SrVB3N8graGdA",tilesetId:"satellite-v9"}),r.a.createElement(k.a,{position:this.props.position},r.a.createElement(w.a,null,this.props.markerText)))},n}(r.a.Component);g.defaultProps={position:[51,-1],zoom:11,markerText:""};var y=g;var b=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).state={position:[30,20]},a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var o=n.prototype;return o.updateMapPosition=function(e){console.log("Updating map position to"),console.log(e),this.setState({position:e})},o.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{width:1/3},r.a.createElement(d,{updateMapPositionCallback:this.updateMapPosition.bind(this),peaks:this.props.peaks})),r.a.createElement(i.a,{width:2/3},"undefined"!=typeof window&&r.a.createElement(y,{position:this.state.position,zoom:7})))},n}(r.a.Component);b.defaultProps={peaks:[]};var E=b;a.d(t,"query",function(){return P});var P="1311196967";t.default=function(e){var t=e.data,a=[t.allGeoFeature.edges[0].node];return t.allGeoFeature.edges.forEach(function(e){parseInt(e.node.featureFields.ele)>parseInt(a[a.length-1].featureFields.ele)&&a.push(e.node)}),r.a.createElement(o.a,null,r.a.createElement(E,{peaks:a}))}},211:function(e,t,a){var n;e.exports=(n=a(216))&&n.default||n},215:function(e){e.exports={data:{site:{siteMetadata:{title:"Highest place south of"}}}}},216:function(e,t,a){"use strict";a.r(t);a(18);var n=a(0),r=a.n(n),o=a(116);t.default=function(e){var t=e.location,a=e.pageResources;return a?r.a.createElement(o.a,Object.assign({location:t,pageResources:a},a.json)):null}},218:function(e,t,a){"use strict";var n=a(215),r=a(0),o=a.n(r),i=(a(79),a(211),a(11).default.enqueue,o.a.createContext({}));function s(e){var t=e.staticQueryData,a=e.data,n=e.query,r=e.render,i=a?a.data:t[n]&&t[n].data;return o.a.createElement(o.a.Fragment,null,i&&r(i),!i&&o.a.createElement("div",null,"Loading (StaticQuery)"))}var p=function(e){var t=e.data,a=e.query,n=e.render,r=e.children;return o.a.createElement(i.Consumer,null,function(e){return o.a.createElement(s,{data:t,query:a,render:n||r,staticQueryData:e})})};var l=a(209);t.a=function(e){var t=e.children;return o.a.createElement(p,{query:"755544856",render:function(e){return o.a.createElement("div",null,o.a.createElement(l.c,{m:3,flexWrap:"wrap"},o.a.createElement(l.a,{width:1},o.a.createElement(l.d,{fontSize:[4,5,6],color:"primary"},"Highest place south of...")),o.a.createElement(l.a,{width:1},o.a.createElement(l.f,{color:"text",fontsize:[2,3,4],pt:2},"This is an interactive map of those places that can claim to be 'the highest place in the UK south of (some other place)'"),o.a.createElement(l.f,{color:"text",fontsize:[2,3,4],pt:2},"Why? Walking up Pen-y-fan recently I saw it was listed somewhere as 'the highest place south of Cadair Idris' - being a mapping fan I wondered whether it was possible to find out where all the places that were the 'highest place south of' somewhere else."))),o.a.createElement(l.c,null,t),o.a.createElement(l.c,null,o.a.createElement(l.a,{bg:"primary",p:2,color:"text",width:1},"Build by ",o.a.createElement("a",{href:"https://www.andrewl.net"},"Andrew Larcombe")," using ",o.a.createElement("a",{href:"https://www.gatsbyjs.com"},"Gatsby")," and using data from OpenStreetMap, images from wikimedia and maps from MapBox")))},data:n})}}}]);
//# sourceMappingURL=component---src-pages-index-js-5ce96cc20664bc5e27e4.js.map